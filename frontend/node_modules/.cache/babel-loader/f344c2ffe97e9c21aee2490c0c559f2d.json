{"ast":null,"code":"var _jsxFileName = \"D:\\\\repos\\\\restaurant-reviews\\\\frontend\\\\src\\\\components\\\\add-review.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport RestaurantDataService from \"../services/restaurant\";\nimport { Link, useLocation, useParams } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction AddReview(_ref) {\n  _s();\n\n  let {\n    user,\n    state\n  } = _ref;\n  console.log(\"PROPS\", user, state);\n  const location = useLocation();\n  const params = useParams();\n  let initialReviewState = \"\"; //console.log(\"USE LOCATION\",user, _review);\n\n  let editing = false;\n\n  if (state && state.review) {\n    editing = true;\n    initialReviewState = state.review.text;\n  }\n\n  const [review, setReview] = useState(initialReviewState);\n  console.log(\"REVIEW\", review);\n  const [submitted, setSubmitted] = useState(false);\n\n  const handleInputChange = event => {\n    setReview(event.target.value);\n  };\n\n  const saveReview = () => {\n    var data = {\n      text: review,\n      name: user.name,\n      user_id: user.id,\n      restaurant_id: params.id\n    };\n\n    if (editing) {\n      data.review_id = location.state.currentReview._id;\n      RestaurantDataService.updateReview(data).then(response => {\n        setSubmitted(true);\n        console.log(response.data);\n      }).catch(e => {\n        console.log(e);\n      });\n    } else {\n      RestaurantDataService.createReview(data).then(response => {\n        setSubmitted(true);\n        console.log(response.data);\n      }).catch(e => {\n        console.log(e);\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: true ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"submit-form\",\n      children: submitted ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"You submitted successfully!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/restaurants/\" + params.id,\n          className: \"btn btn-outline-secondary\",\n          children: \"Back to Restaurant\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"description\",\n            children: [editing ? \"Edit\" : \"Create\", \" Review\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"form-control\",\n            id: \"text\",\n            required: true,\n            value: review,\n            onChange: handleInputChange,\n            name: \"text\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: saveReview,\n          className: \"btn btn-success\",\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AddReview, \"q0MO7BuY8nT/YWctL9F8gx2oN18=\", false, function () {\n  return [useLocation, useParams];\n});\n\n_c = AddReview;\nexport default AddReview;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddReview\");","map":{"version":3,"names":["React","useState","RestaurantDataService","Link","useLocation","useParams","AddReview","user","state","console","log","location","params","initialReviewState","editing","review","text","setReview","submitted","setSubmitted","handleInputChange","event","target","value","saveReview","data","name","user_id","id","restaurant_id","review_id","currentReview","_id","updateReview","then","response","catch","e","createReview"],"sources":["D:/repos/restaurant-reviews/frontend/src/components/add-review.js"],"sourcesContent":["import React, {useState} from \"react\";\r\nimport RestaurantDataService from \"../services/restaurant\";\r\nimport { Link, useLocation, useParams } from \"react-router-dom\";\r\n\r\nfunction AddReview({user, state}) {\r\n  console.log(\"PROPS\",user,state);\r\n  const location = useLocation();\r\n  const params = useParams();\r\n  let initialReviewState = \"\";\r\n  //console.log(\"USE LOCATION\",user, _review);\r\n  let editing = false;\r\n\r\n  if (state && state.review){\r\n    editing = true;\r\n    \r\n    initialReviewState = state.review.text;\r\n  }\r\n\r\n   const [review, setReview] = useState(initialReviewState);\r\n   console.log(\"REVIEW\", review);\r\n   const [submitted, setSubmitted] = useState(false);\r\n\r\n  const handleInputChange = event => {\r\n    setReview(event.target.value);\r\n  };\r\n\r\n  const saveReview = () => {\r\n    var data = {\r\n      text: review,\r\n      name: user.name,\r\n      user_id: user.id,\r\n      restaurant_id: params.id\r\n    };\r\n\r\n    if (editing) {\r\n      data.review_id = location.state.currentReview._id;\r\n      RestaurantDataService.updateReview(data)\r\n        .then(response => {\r\n          setSubmitted(true);\r\n          console.log(response.data);\r\n        })\r\n        .catch(e => {\r\n          console.log(e);\r\n        });\r\n    }\r\n    else {\r\n      RestaurantDataService.createReview(data)\r\n        .then(response => {\r\n          setSubmitted(true);\r\n          console.log(response.data);\r\n        })\r\n        .catch(e => {\r\n          console.log(e);\r\n        });\r\n    }\r\n  }\r\n  \r\n  return (\r\n    <div>\r\n      {true ? (\r\n        <div className=\"submit-form\">\r\n          {submitted ? (\r\n            <div>\r\n              <h4>You submitted successfully!</h4>\r\n              <Link to={\"/restaurants/\" + params.id} className=\"btn btn-outline-secondary\">\r\n                Back to Restaurant\r\n              </Link>\r\n            </div>\r\n          ) : (\r\n            <div>\r\n              <div className =\"form-group\">\r\n                <label htmlFor=\"description\">{editing ? \"Edit\" : \"Create\"} Review</label>\r\n                <input type=\"text\" className=\"form-control\" id=\"text\" required value={review} onChange={handleInputChange} name=\"text\" />\r\n              </div>\r\n              <button onClick={saveReview} className=\"btn btn-success\">Submit</button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      ) : (\r\n        <div>\r\n\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AddReview;"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AACA,OAAOC,qBAAP,MAAkC,wBAAlC;AACA,SAASC,IAAT,EAAeC,WAAf,EAA4BC,SAA5B,QAA6C,kBAA7C;;;AAEA,SAASC,SAAT,OAAkC;EAAA;;EAAA,IAAf;IAACC,IAAD;IAAOC;EAAP,CAAe;EAChCC,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAoBH,IAApB,EAAyBC,KAAzB;EACA,MAAMG,QAAQ,GAAGP,WAAW,EAA5B;EACA,MAAMQ,MAAM,GAAGP,SAAS,EAAxB;EACA,IAAIQ,kBAAkB,GAAG,EAAzB,CAJgC,CAKhC;;EACA,IAAIC,OAAO,GAAG,KAAd;;EAEA,IAAIN,KAAK,IAAIA,KAAK,CAACO,MAAnB,EAA0B;IACxBD,OAAO,GAAG,IAAV;IAEAD,kBAAkB,GAAGL,KAAK,CAACO,MAAN,CAAaC,IAAlC;EACD;;EAEA,MAAM,CAACD,MAAD,EAASE,SAAT,IAAsBhB,QAAQ,CAACY,kBAAD,CAApC;EACAJ,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBK,MAAtB;EACA,MAAM,CAACG,SAAD,EAAYC,YAAZ,IAA4BlB,QAAQ,CAAC,KAAD,CAA1C;;EAED,MAAMmB,iBAAiB,GAAGC,KAAK,IAAI;IACjCJ,SAAS,CAACI,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAT;EACD,CAFD;;EAIA,MAAMC,UAAU,GAAG,MAAM;IACvB,IAAIC,IAAI,GAAG;MACTT,IAAI,EAAED,MADG;MAETW,IAAI,EAAEnB,IAAI,CAACmB,IAFF;MAGTC,OAAO,EAAEpB,IAAI,CAACqB,EAHL;MAITC,aAAa,EAAEjB,MAAM,CAACgB;IAJb,CAAX;;IAOA,IAAId,OAAJ,EAAa;MACXW,IAAI,CAACK,SAAL,GAAiBnB,QAAQ,CAACH,KAAT,CAAeuB,aAAf,CAA6BC,GAA9C;MACA9B,qBAAqB,CAAC+B,YAAtB,CAAmCR,IAAnC,EACGS,IADH,CACQC,QAAQ,IAAI;QAChBhB,YAAY,CAAC,IAAD,CAAZ;QACAV,OAAO,CAACC,GAAR,CAAYyB,QAAQ,CAACV,IAArB;MACD,CAJH,EAKGW,KALH,CAKSC,CAAC,IAAI;QACV5B,OAAO,CAACC,GAAR,CAAY2B,CAAZ;MACD,CAPH;IAQD,CAVD,MAWK;MACHnC,qBAAqB,CAACoC,YAAtB,CAAmCb,IAAnC,EACGS,IADH,CACQC,QAAQ,IAAI;QAChBhB,YAAY,CAAC,IAAD,CAAZ;QACAV,OAAO,CAACC,GAAR,CAAYyB,QAAQ,CAACV,IAArB;MACD,CAJH,EAKGW,KALH,CAKSC,CAAC,IAAI;QACV5B,OAAO,CAACC,GAAR,CAAY2B,CAAZ;MACD,CAPH;IAQD;EACF,CA7BD;;EA+BA,oBACE;IAAA,UACG,oBACC;MAAK,SAAS,EAAC,aAAf;MAAA,UACGnB,SAAS,gBACR;QAAA,wBACE;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QADF,eAEE,QAAC,IAAD;UAAM,EAAE,EAAE,kBAAkBN,MAAM,CAACgB,EAAnC;UAAuC,SAAS,EAAC,2BAAjD;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAFF;MAAA;QAAA;QAAA;QAAA;MAAA,QADQ,gBAQR;QAAA,wBACE;UAAK,SAAS,EAAE,YAAhB;UAAA,wBACE;YAAO,OAAO,EAAC,aAAf;YAAA,WAA8Bd,OAAO,GAAG,MAAH,GAAY,QAAjD;UAAA;YAAA;YAAA;YAAA;UAAA,QADF,eAEE;YAAO,IAAI,EAAC,MAAZ;YAAmB,SAAS,EAAC,cAA7B;YAA4C,EAAE,EAAC,MAA/C;YAAsD,QAAQ,MAA9D;YAA+D,KAAK,EAAEC,MAAtE;YAA8E,QAAQ,EAAEK,iBAAxF;YAA2G,IAAI,EAAC;UAAhH;YAAA;YAAA;YAAA;UAAA,QAFF;QAAA;UAAA;UAAA;UAAA;QAAA,QADF,eAKE;UAAQ,OAAO,EAAEI,UAAjB;UAA6B,SAAS,EAAC,iBAAvC;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QALF;MAAA;QAAA;QAAA;QAAA;MAAA;IATJ;MAAA;MAAA;MAAA;IAAA,QADD,gBAoBC;MAAA;MAAA;MAAA;IAAA;EArBJ;IAAA;IAAA;IAAA;EAAA,QADF;AA4BD;;GAjFQlB,S;UAEUF,W,EACFC,S;;;KAHRC,S;AAmFT,eAAeA,SAAf"},"metadata":{},"sourceType":"module"}