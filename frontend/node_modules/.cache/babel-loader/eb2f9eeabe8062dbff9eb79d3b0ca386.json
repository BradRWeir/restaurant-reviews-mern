{"ast":null,"code":"var _jsxFileName = \"D:\\\\repos\\\\restaurant-reviews\\\\frontend\\\\src\\\\components\\\\restaurants.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport RestaurantDataService from \"../services/restaurant\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Restaurant(_ref) {\n  _s();\n\n  let {\n    user\n  } = _ref;\n  const params = useParams();\n  const initialRestaurantState = {\n    id: null,\n    name: \"\",\n    address: {},\n    cuisine: \"\",\n    reviews: []\n  };\n  const [restaurant, setRestaurant] = useState(initialRestaurantState);\n\n  const getRestaurant = id => {\n    RestaurantDataService.get(id).then(response => {\n      setRestaurant(response.data);\n      console.log(response.data);\n    }).catch(e => {\n      console.log(e);\n    });\n  };\n\n  useEffect(() => {\n    getRestaurant(params.id);\n  }, [params.id]);\n\n  const deleteReview = (reviewId, index) => {\n    RestaurantDataService.deleteReview(reviewId, user.id).then(response => {\n      setRestaurant(prevState => {\n        prevState.reviews.splice(index, 1);\n        return { ...prevState\n        };\n      });\n    }).catch(e => {\n      console.log(e);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: restaurant ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        children: restaurant.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Cuisine: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 21\n        }, this), restaurant.cuisine, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 67\n        }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Address: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 21\n        }, this), restaurant.address.building, \" \", restaurant.address.street, \", \", restaurant.address.zipcode]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/restaurants/\" + params.id + \"/review\",\n        className: \"btn btn-primary\",\n        children: \"Add Review\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Reviews\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: restaurant.reviews.length > 0 ? restaurant.reviews.map((review, index) => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-lg-4 pb-1\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-body\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"card-text\",\n                  children: [review.text, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 68,\n                    columnNumber: 62\n                  }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"User: \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 69,\n                    columnNumber: 49\n                  }, this), review.name, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 69,\n                    columnNumber: 85\n                  }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Date: \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 70,\n                    columnNumber: 49\n                  }, this), review.date]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 67,\n                  columnNumber: 45\n                }, this), user && user.id === review.user_id && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                    onClick: () => deleteReview(review._id, index),\n                    className: \"btn btn-primary col-lg-5 mx-1 mb-1\",\n                    children: \"Delete\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 74,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(Link, {\n                    to: {\n                      pathname: \"/restaurants/\" + params.id + \"/review\",\n                      state: {\n                        currentReview: review\n                      }\n                    },\n                    className: \"btn btn-primary col-lg-5 mx-1 mb-1\",\n                    children: \"Edit\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 75,\n                    columnNumber: 53\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 73,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 66,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 37\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 33\n          }, this);\n        }) : /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No review yet.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No restaurant selected.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Restaurant, \"iFlKzswaXcmgqUo6QMZyFOSnvo0=\", false, function () {\n  return [useParams];\n});\n\n_c = Restaurant;\nexport default Restaurant;\n\nvar _c;\n\n$RefreshReg$(_c, \"Restaurant\");","map":{"version":3,"names":["React","useState","useEffect","RestaurantDataService","Link","useParams","Restaurant","user","params","initialRestaurantState","id","name","address","cuisine","reviews","restaurant","setRestaurant","getRestaurant","get","then","response","data","console","log","catch","e","deleteReview","reviewId","index","prevState","splice","building","street","zipcode","length","map","review","text","date","user_id","_id","pathname","state","currentReview"],"sources":["D:/repos/restaurant-reviews/frontend/src/components/restaurants.js"],"sourcesContent":["import React, {useState, useEffect} from \"react\";\r\nimport RestaurantDataService from \"../services/restaurant\";\r\nimport {Link, useParams} from \"react-router-dom\";\r\n\r\nfunction Restaurant({user}) {\r\n    const params = useParams();\r\n    const initialRestaurantState = {\r\n        id: null,\r\n        name: \"\",\r\n        address: {},\r\n        cuisine: \"\",\r\n        reviews: []\r\n    };\r\n\r\n    const [restaurant, setRestaurant] = useState(initialRestaurantState);\r\n\r\n    const getRestaurant = id => {\r\n        RestaurantDataService.get(id)\r\n            .then(response => {\r\n                setRestaurant(response.data);\r\n                console.log(response.data);\r\n            })\r\n            .catch(e => {\r\n                console.log(e);\r\n            });\r\n    };\r\n\r\n    useEffect(() => {\r\n        getRestaurant(params.id);\r\n    }, [params.id]);\r\n\r\n    const deleteReview = (reviewId, index) => {\r\n        RestaurantDataService.deleteReview(reviewId, user.id)\r\n            .then(response => {\r\n                setRestaurant((prevState) => {\r\n                    prevState.reviews.splice(index, 1);\r\n                    return({ ...prevState });\r\n                })\r\n            })\r\n            .catch(e => {\r\n                console.log(e);\r\n            });\r\n    };\r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n        {restaurant ? (\r\n            <div>\r\n                <h5>{restaurant.name}</h5>\r\n                <p>\r\n                    <strong>Cuisine: </strong>{restaurant.cuisine}<br />\r\n                    <strong>Address: </strong>{restaurant.address.building} {restaurant.address.street}, {restaurant.address.zipcode}\r\n                </p>\r\n                <Link to={\"/restaurants/\" + params.id + \"/review\"} className=\"btn btn-primary\">\r\n                    Add Review\r\n                </Link>\r\n                <h4>Reviews</h4>\r\n                <div className=\"row\">\r\n                    {restaurant.reviews.length > 0 ? (\r\n                        restaurant.reviews.map((review, index) => {\r\n                            return (\r\n                                <div className=\"col-lg-4 pb-1\" key={index}>\r\n                                    <div className=\"card\">\r\n                                        <div className=\"card-body\">\r\n                                            <p className=\"card-text\">\r\n                                                {review.text}<br />\r\n                                                <strong>User: </strong>{review.name}<br />\r\n                                                <strong>Date: </strong>{review.date}\r\n                                            </p>\r\n                                            {user && user.id === review.user_id &&\r\n                                                <div className=\"row\">\r\n                                                    <a onClick={() => deleteReview(review._id, index)} className=\"btn btn-primary col-lg-5 mx-1 mb-1\">Delete</a>\r\n                                                    <Link to={{\r\n                                                        pathname: \"/restaurants/\" + params.id + \"/review\",\r\n                                                        state: {\r\n                                                            currentReview: review\r\n                                                        }\r\n                                                    }} className=\"btn btn-primary col-lg-5 mx-1 mb-1\">Edit</Link>\r\n                                                </div>\r\n                                            }\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        })\r\n                    ): (\r\n                        <div>\r\n                            <br />\r\n                            <p>No review yet.</p>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        ) : (\r\n            <div>\r\n                    <br />\r\n                    <p>No restaurant selected.</p>\r\n            </div>\r\n        )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Restaurant;"],"mappings":"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"},"metadata":{},"sourceType":"module"}